ORG 0BE000H
BL EQU 0D4H
BH EQU 0D5H
BX EQU 0D4H
CX EQU 0D6H
DX EQU 0D8H
BP EQU 0ECH
PX EQU 0EEH
PY EQU 0EDH
IOCS EQU 0FFFE8H

INIT:
PRE 32H MVW (CX),0000H
MV X,0000H
MV Y,0000H

PRE 32H MV (BL),0F0H
MV X,0BBC00H
LOAD:
PRE 32H CMP (BL),0F0H
JRNZ SS
SS:
MV I,0056H
PRE 32H MV (BH),A
CALLF IOCS
PRE 32H INC (BL)
JR LOAD
RETF

SAVE:
;MV I,04FH
;MV X,0
;MV Y,0
;PRE 32H MVW (BX),0F0H
;PRE 32H MVW (DX),020H
;PRE 32H MVW (CX),0FFFFH
;PRE 32H MVW [0BFC2AH],(CX)
;PRE 32H MVW (CX),0000H
;PRE 32H MV [0BFC96H],(CX)
;CALLF IOCS

MV I,0055H
PRE 32H MV (BH),0
MV X,0BBCF0H
CALLF IOCS
RETF

HIDECSR:
MV I,0045H
MV A,0
CALLF IOCS

RETF
